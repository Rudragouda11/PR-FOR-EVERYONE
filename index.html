<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PR for Everyone</title>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins', sans-serif; }
    body { background:#0d1117; color:#fff; }

    nav { display:flex; justify-content:space-between; align-items:center; padding:15px 50px; background:rgba(10,10,10,0.85); position:sticky; top:0; z-index:1000; }
    nav .logo { font-size:24px; font-weight:700; background:linear-gradient(90deg,#5865F2,#FF5ACD); -webkit-background-clip:text; color:transparent; }
    nav .btn { padding:10px 25px; border-radius:25px; background:linear-gradient(90deg,#5865F2,#FF5ACD); border:none; color:white; font-weight:600; cursor:pointer; }
    nav .btn:hover { box-shadow:0 0 15px #FF5ACD,0 0 25px #5865F2; transform:translateY(-2px); }

    .hero { text-align:center; padding:100px 20px; }
    .hero h1 { font-size:60px; margin-bottom:20px; background:linear-gradient(90deg,#5865F2,#FF5ACD); -webkit-background-clip:text; color:transparent; }
    .hero p { font-size:20px; margin-bottom:30px; color:#aaa; }
    .hero .cta { padding:15px 35px; font-size:18px; border-radius:30px; background:linear-gradient(90deg,#5865F2,#FF5ACD); border:none; color:white; cursor:pointer; }
    .hero .cta:hover { box-shadow:0 0 20px #FF5ACD,0 0 30px #5865F2; transform:translateY(-2px); }

    .features { display:flex; flex-wrap:wrap; justify-content:center; gap:30px; padding:50px 20px; }
    .card { background:rgba(255,255,255,0.05); backdrop-filter:blur(10px); border-radius:20px; padding:30px; width:340px; text-align:center; transition:transform 0.3s, box-shadow 0.3s; }
    .card:hover { transform:translateY(-10px); box-shadow:0 0 20px #FF5ACD,0 0 30px #5865F2; }
    .card h3 { font-size:22px; margin-bottom:15px; }
    .card p { font-size:16px; color:#ccc; }

    .logo-circle { width:60px; height:60px; border-radius:50%; background:linear-gradient(90deg,#5865F2,#FF5ACD); display:flex; align-items:center; justify-content:center; font-size:28px; font-weight:700; margin:0 auto 15px auto; color:#fff; overflow:hidden; }
    .logo-circle img.logo-img { width:100%; height:100%; object-fit:cover; border-radius:50%; }

    .form-section { padding:50px 20px; }
    .form-section input, .form-section textarea { padding:12px; border-radius:10px; border:none; background:#1a1a1a; color:#fff; }
    .form-section input:focus, .form-section textarea:focus { outline:none; box-shadow:0 0 10px #FF5ACD; background:#222; }
    .form-section button { padding:15px; border-radius:30px; border:none; background:linear-gradient(90deg,#5865F2,#FF5ACD); color:#fff; cursor:pointer; font-weight:600; }
    .form-section button:hover { box-shadow:0 0 20px #FF5ACD,0 0 30px #5865F2; transform:translateY(-2px); }

    #listingsContainer { display:flex; flex-wrap:wrap; justify-content:center; gap:20px; padding:30px 0; }

    .share-btn, .like-btn { padding:5px 12px; border-radius:15px; border:none; background:linear-gradient(90deg,#5865F2,#FF5ACD); color:#fff; cursor:pointer; font-weight:600; }
    .share-btn:hover, .like-btn:hover { box-shadow:0 0 15px #FF5ACD,0 0 20px #5865F2; transform:translateY(-1px); }

    @media(max-width:900px){ .features, #listingsContainer { flex-direction:column; align-items:center; } }
  </style>
</head>

<body>
  <nav>
    <div class="logo">PR for Everyone</div>
    <button class="btn" onclick="document.getElementById('agentForm').scrollIntoView({behavior:'smooth'})">List Your PR Service</button>
  </nav>

  <section class="hero">
    <h1>PR for Everyone</h1>
    <p>Connect with top PR agencies, explore services, and grow your reach.</p>
    <button class="cta" onclick="window.location.href='browse.html'">Get Started</button>
  </section>

  <section class="features">
    <div class="card">
      <h3>Easy Listing</h3>
      <p>Agents can quickly list their PR campaigns with details.</p>
    </div>
    <div class="card">
      <h3>Explore Services</h3>
      <p>Customers can browse PR services and find the right fit.</p>
      <button class="cta" onclick="window.location.href='browse.html'">Browse</button>
    </div>
    <div class="card">
      <h3>Secure & Modern</h3>
      <p>All data is securely stored and displayed in a sleek interface.</p>
    </div>
  </section>

  <section class="form-section">
    <h2 style="text-align:center; margin-bottom:30px; font-size:32px;">List Your PR Service</h2>
    <form id="agentForm" style="max-width:600px; margin:0 auto; display:flex; flex-direction:column; gap:15px;">
      <input type="text" id="name" placeholder="Company / Influencer Name" required>
      <input type="text" id="reach" placeholder="Reach (Optional)">
      <input type="text" id="price" placeholder="Approx Price / Commission" required>
      <textarea id="description" placeholder="Short Description" required rows="4"></textarea>
      <input type="file" id="logo" accept="image/*">
      <button type="submit" id="submitBtn">Submit Listing</button>
    </form>
    <p id="successMessage" style="text-align:center; margin-top:15px; color:#4caf50; display:none;">Your listing was submitted!</p>
  </section>

  <section id="listingsContainer"></section>

  <footer style="text-align:center; padding:20px; color:#777;">&copy; 2025 PR for Everyone. All rights reserved.</footer>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
    import { getFirestore, collection, addDoc, query, orderBy, onSnapshot, serverTimestamp, doc, getDoc, updateDoc } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";
    import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-storage.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBKVPXz4_30DCFXgP6aEFZ_wn86GS0bSqQ",
      authDomain: "pr-for-everyone.firebaseapp.com",
      projectId: "pr-for-everyone",
      storageBucket: "pr-for-everyone.appspot.com",
      messagingSenderId: "90365098207",
      appId: "1:90365098207:web:c6988b51816a8610fa116a",
      measurementId: "G-ETGHRSCJMD"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const storage = getStorage(app);

    const form = document.getElementById('agentForm');
    const submitBtn = document.getElementById('submitBtn');
    const successMsg = document.getElementById('successMessage');
    const listingsContainer = document.getElementById('listingsContainer');

    window.likeListing = async function(docId, span) {
      const refDoc = doc(db,'pr_listings',docId);
      const snap = await getDoc(refDoc);
      const likes = (snap.data().likes||0)+1;
      await updateDoc(refDoc,{likes});
      span.textContent = likes;
    };

    window.shareListing = function(name) {
      const data = { title:"Check this PR Service!", text:`Check out ${name}'s PR service on PR for Everyone!`, url:window.location.href };
      if(navigator.share) navigator.share(data).catch(console.error);
      else { navigator.clipboard.writeText(`${data.text} ${data.url}`); alert("Link copied!"); }
    };

    form.addEventListener('submit',async(e)=>{
      e.preventDefault();
      submitBtn.disabled=true; submitBtn.textContent="Submitting...";
      const name=document.getElementById('name').value.trim();
      const reach=document.getElementById('reach').value.trim()||"Not specified";
      const price=document.getElementById('price').value.trim();
      const description=document.getElementById('description').value.trim();
      const logoFile=document.getElementById('logo').files[0];

      if(!name||!price||!description){ alert("Please fill all required fields!"); submitBtn.disabled=false; submitBtn.textContent="Submit Listing"; return; }

      try{
        let logoURL=null;
        if(logoFile){
          const storageRef=ref(storage,"logos/"+Date.now()+"_"+logoFile.name);
          const snapshot=await uploadBytes(storageRef,logoFile);
          logoURL=await getDownloadURL(snapshot.ref);
        }
        await addDoc(collection(db,"pr_listings"),{name,reach,price,description,logoURL,likes:0,createdAt:serverTimestamp()});
        form.reset(); successMsg.style.display="block"; setTimeout(()=>successMsg.style.display="none",2000);
      } catch(err){ console.error("Error adding listing:",err); }

      submitBtn.disabled=false; submitBtn.textContent="Submit Listing";
    });

    const q=query(collection(db,"pr_listings"),orderBy("createdAt","desc"));
    onSnapshot(q,(snapshot)=>{
      listingsContainer.innerHTML="";
      snapshot.forEach((docSnap)=>{
        const data=docSnap.data();
        const card=document.createElement("div");
        card.className="card";
        const logoHTML = data.logoURL ? `<img src="${data.logoURL}" class="logo-img">` : `<div class="logo-circle">${data.name[0]?.toUpperCase()||'P'}</div>`;
        card.innerHTML=`
          ${logoHTML}
          <h3>${data.name}</h3>
          <p><strong>Reach:</strong> ${data.reach}</p>
          <p><strong>Price:</strong> ${data.price}</p>
          <p>${data.description}</p>
          <div style="display:flex; justify-content:center; gap:10px; margin-top:10px;">
            <button class="like-btn" onclick="likeListing('${docSnap.id}', this.nextElementSibling)">‚ù§Ô∏è Like</button>
            <span>${data.likes||0}</span>
            <button class="share-btn" onclick="shareListing('${data.name}')">üîó Share</button>
          </div>
        `;
        listingsContainer.appendChild(card);
      });
    });
  </script>
</body>
</html>
