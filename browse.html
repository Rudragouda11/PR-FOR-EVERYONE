<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Browse PR Services - PR for Everyone</title>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Firebase SDKs -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
    import { getFirestore, collection, query, orderBy, onSnapshot, doc, getDoc, updateDoc } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBKVPXz4_30DCFXgP6aEFZ_wn86GS0bSqQ",
      authDomain: "pr-for-everyone.firebaseapp.com",
      projectId: "pr-for-everyone",
      storageBucket: "pr-for-everyone.appspot.com",
      messagingSenderId: "90365098207",
      appId: "1:90365098207:web:c6988b51816a8610fa116a",
      measurementId: "G-ETGHRSCJMD"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    window.addEventListener('DOMContentLoaded', () => {
      const listingsContainer = document.getElementById('listingsContainer');
      const searchInput = document.getElementById('searchInput');

      // Like a listing
      window.likeListing = async function(docId, likesSpan){
        const docRef = doc(db, "pr_listings", docId);
        const docSnap = await getDoc(docRef);
        let likes = docSnap.data().likes || 0;
        likes += 1;
        await updateDoc(docRef, { likes });
        likesSpan.textContent = likes;
      }

      // Share a listing
      window.shareListing = function(name){
        const shareData = {
          title: 'Check this PR Service!',
          text: `Check out ${name}'s PR service on PR for Everyone!`,
          url: window.location.href
        };
        if(navigator.share){
          navigator.share(shareData).catch(console.error);
        } else {
          navigator.clipboard.writeText(`${shareData.text} ${shareData.url}`);
          alert('Link copied to clipboard!');
        }
      }

      // Dynamic Listings Display
      const q = query(collection(db, "pr_listings"), orderBy("timestamp", "desc"));
      onSnapshot(q, (snapshot) => {
        const allListings = [];
        snapshot.forEach(docItem => allListings.push({id: docItem.id, data: docItem.data()}));
        displayListings(allListings);

        // Search functionality
        searchInput.addEventListener('input', () => {
          const filtered = allListings.filter(l => 
            l.data.name.toLowerCase().includes(searchInput.value.toLowerCase())
          );
          displayListings(filtered);
        });
      });

      function displayListings(listings){
        listingsContainer.innerHTML = "";
        listings.forEach(item => {
          const data = item.data;
          const card = document.createElement('div');
          card.className = "card listing-card";

          const logoCircle = document.createElement('div');
          logoCircle.className = "logo-circle";
          if(data.logoURL){
            const img = document.createElement('img');
            img.src = data.logoURL;
            img.alt = "Logo";
            img.className = "logo-img";
            logoCircle.appendChild(img);
          } else {
            logoCircle.textContent = data.name.charAt(0).toUpperCase();
          }
          card.appendChild(logoCircle);

          const nameH3 = document.createElement('h3');
          nameH3.textContent = data.name;
          card.appendChild(nameH3);

          const reachP = document.createElement('p');
          reachP.innerHTML = `<strong>Reach:</strong> ${data.reach || "Not specified"}`;
          card.appendChild(reachP);

          const priceP = document.createElement('p');
          priceP.innerHTML = `<strong>Price / Commission:</strong> ${data.price}`;
          card.appendChild(priceP);

          const descP = document.createElement('p');
          descP.textContent = data.description;
          card.appendChild(descP);

          // Like & Share buttons
          const btnDiv = document.createElement('div');
          btnDiv.style.marginTop = "10px";
          btnDiv.style.display = "flex";
          btnDiv.style.justifyContent = "center";
          btnDiv.style.gap = "15px";

          const shareBtn = document.createElement('button');
          shareBtn.className = "share-btn";
          shareBtn.textContent = "Share ðŸ”—";
          shareBtn.onclick = ()=>shareListing(data.name);
          btnDiv.appendChild(shareBtn);

          const likeBtn = document.createElement('button');
          likeBtn.className = "like-btn";
          likeBtn.textContent = "Like â¤ï¸";
          btnDiv.appendChild(likeBtn);

          const likesSpan = document.createElement('span');
          likesSpan.textContent = data.likes || 0;
          likeBtn.onclick = ()=>likeListing(item.id, likesSpan);
          btnDiv.appendChild(likesSpan);

          card.appendChild(btnDiv);
          listingsContainer.appendChild(card);
        });
      }
    });
  </script>

  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins', sans-serif; }
    body { background:#0d1117; color:#fff; }
    nav { display:flex; justify-content:space-between; align-items:center; padding:15px 50px; background:rgba(10,10,10,0.85); position:sticky; top:0; z-index:1000; }
    nav .logo { font-size:24px; font-weight:700; background:linear-gradient(90deg,#5865F2,#FF5ACD); -webkit-background-clip:text; color:transparent; }
    nav .btn { padding:10px 25px; border-radius:25px; background:linear-gradient(90deg,#5865F2,#FF5ACD); border:none; color:white; font-weight:600; cursor:pointer; }
    nav .btn:hover { box-shadow:0 0 15px #FF5ACD,0 0 25px #5865F2; transform:translateY(-2px); }
    .hero { text-align:center; padding:60px 20px; }
    .hero h1 { font-size:48px; margin-bottom:15px; background:linear-gradient(90deg,#5865F2,#FF5ACD); -webkit-background-clip:text; color:transparent; }
    .hero p { font-size:18px; margin-bottom:20px; color:#aaa; }
    .hero input { padding:12px 15px; border-radius:25px; border:none; width:300px; max-width:80%; margin-bottom:20px; }
    .card { background:rgba(255,255,255,0.05); backdrop-filter:blur(10px); border-radius:20px; padding:25px; width:340px; text-align:center; margin-bottom:20px; transition:transform 0.3s, box-shadow 0.3s; }
    .card:hover { transform:translateY(-10px); box-shadow:0 0 20px #FF5ACD,0 0 30px #5865F2; }
    .card h3 { font-size:20px; margin-bottom:10px; }
    .card p { font-size:15px; color:#ccc; margin-bottom:5px; }
    .logo-circle { width:60px; height:60px; border-radius:50%; background:linear-gradient(90deg,#5865F2,#FF5ACD); display:flex; align-items:center; justify-content:center; font-size:28px; font-weight:700; margin:0 auto 15px auto; color:#fff; overflow:hidden; }
    .logo-circle img.logo-img { width:100%; height:100%; object-fit:cover; border-radius:50%; }
    #listingsContainer { display:flex; flex-wrap:wrap; justify-content:center; gap:20px; padding:30px 0; }
    .share-btn, .like-btn { padding:5px 12px; border-radius:15px; border:none; background:linear-gradient(90deg,#5865F2,#FF5ACD); color:#fff; cursor:pointer; font-weight:600; }
    .share-btn:hover, .like-btn:hover { box-shadow:0 0 15px #FF5ACD,0 0 20px #5865F2; transform:translateY(-1px); }
    @media(max-width:900px){ #listingsContainer { flex-direction:column; align-items:center; } }
  </style>
</head>
<body>
  <nav>
    <div class="logo">PR for Everyone</div>
    <button class="btn" onclick="location.href='index.html'">List PR Service</button>
  </nav>

  <section class="hero">
    <h1>Explore PR Services</h1>
    <p>Search, filter, and connect with top PR agencies and influencers.</p>
    <input type
